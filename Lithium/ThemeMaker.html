<html>
<head>
	<title>Lithium Theme Editor v0.21 by @supermamon</title>
	<style type="text/css">
	* {
		font-family : 'Helvetica';
	}
	td {
		font-size : 0.8em;
	}
	#code {
		font-family : 'Consolas','Courier New','Courier','monospace';
		font-size: 9pt;
	}
	
	#changelog {
		font-family : 'Helvetica', 'Arial','Tahoma','sans-serif';
		font-size: 8pt;
	}
	
	#changelog p {
	  margin-top: 0em;
	  margin-bottom: 0em;
	}
	
	h2 {
	  font-size : 1.5em;
	  margin-top: 0em;
	  margin-bottom: 0em;
	}
	</style>
	<script language="javascript">

	</script>
	<script language="javascript">
	function settingsChange() {
		var code=document.getElementById('code').value;
		
		var renderBattery = new Function('height', 'percentage', 'charging', 'low', 'color', code);
		
		var height = document.getElementById('cboHeight').options[document.getElementById('cboHeight').selectedIndex].value;
		
		var isCharging = document.getElementById('isCharging').checked;
		
		var isLow = document.getElementById('isLow').checked;
		
		var colors = document.getElementById('txtColor').value;
		
		var colors = colors.split(',');

		var percs=[10,20,50,75,100];
		
		var samples = document.getElementById('samples');
		
		for(var i=0;i<percs.length;i++) {
			img = document.getElementById('img'+percs[i]);
			
			if (!img) {
				var img=document.createElement("img");
				img.setAttribute('id','img'+percs[i]);
				
				if (i>0) {
					samples.appendChild(document.createElement('hr'));
				}
				//samples.appendChild(document.createTextNode(percs[i] + ' '));
				samples.appendChild(img);
				
			}
			img.setAttribute('src', renderBattery(height, percs[i], isCharging, isLow, colors) );
			
		}
		
	}
			

	</script>
</head>
<body>
<h2>Lithium Theme Editor</h2>
<table width="100%" border="0">
	<tr>
		<td valign="top">
			Code:
			<hr>
			<textarea id="code" rows="50" cols="100" width="30%" onkeyup="settingsChange()">
//(height, percentage, charging, low, color)
/* remove the slashes in front on the line above when saving */
{
    /* just keep these */
    var canvas  = document.createElement("canvas"),
        context = canvas.getContext("2d");

    /* prepare the dimensions */
    /* barHeight = three-quarters of the statusBar */
    var barHeight = Math.round(height * 3/4);

    /* barWidth = 4 times the height */
    var barWidth = barHeight*4;

    /* how thick is the border */
    var borderWidth = 1;

    /* inner dimensions */
    var innerHeight = barHeight-borderWidth*2;
    var innerWidth  = barWidth-borderWidth*2;

    /* set the dimensions */
    canvas.width = barWidth;
    canvas.height = barHeight;

    /* draw the borders */
    context.lineWidth = borderWidth;
    var colorString = color.join();
    context.strokeStyle = "rgba(" + colorString + ",1)";
    context.strokeRect(0, 0, barWidth, barHeight);

    /* draw the charge */
    context.fillStyle = "#0F0"; /* green */
    /* if not charging and low or not charging and level is 20% and below */
    if (!charging && low || !charging && percentage <= 20) {
        context.fillStyle = "#F00"; /* red */
    }
    context.fillRect(
		borderWidth, borderWidth, 
		Math.round(innerWidth*(percentage/100)), 
		innerHeight);

    /* some text */
    context.fillStyle = "#000"; 
    context.font = (innerHeight*0.80) + "px Courier";
    context.textAlign = "center";
    context.textBaseline = "middle";
    context.fillText(
		percentage, 
		Math.round(borderWidth+innerWidth/2), 
		Math.round(borderWidth*2+innerHeight/2));

    /* send the image back */
    return canvas.toDataURL("image/png");
}			
					
			</textarea>
		</td>
		<td valign="top" align="left" width="50%">
			Styles:
			<hr>		
			<table border="0">
				<tr>
					<td>Height</td>
					<td>: <select id="cboHeight" onchange="settingsChange()">
						<option value="20">20
						<option value="40">40
						<option value="48">48
						<option value="60">60
						<option value="72">72
					</select></td>
				</tr>
				<tr>
					<td>Charging</td>
					<td>: <input id="isCharging" type="checkBox" onclick="settingsChange()">
				</tr>
				<tr>
					<td>Low</td>
					<td>: <input id="isLow" type="checkBox" onclick="settingsChange()">
				</tr>
				<tr>
					<td>Color</td>
					<td>: <input id="txtColor" type="text" value="0,0,256" onchange="settingsChange()">
					<sup style="font-size:8pt">(separate by comma)</sup>
				</tr>
				<tr>
					<td valign="top">Samples</td>
					<td id="samples"></td>
					
				</tr>
			</table>
			<hr>
			by <a href="https://twitter.com/supermamon/">@supermamon</a>
			<br>
			<br>
			<div id="changelog">
				<p>v0.21 : Add sample code for putting text</p>
				<p>v0.20 : Simpler sample with comments</p>
				<p>v0.10 : First Release</p>
			
			</div>
		</td>
	</tr>
</table>

<script language="javascript">
	settingsChange();
</script>
</body>


</html>