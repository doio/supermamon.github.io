<html>
<head>
	<title>Lithium Theme Editor v0.32 by @supermamon</title>
	<style type="text/css">
	* {
		font-family : 'Helvetica';
	}
	td {
		font-size : 0.8em;
	}
	#code {
		font-family : 'Consolas','Courier New','Courier','monospace';
		font-size: 9pt;
		border: 1px solid Black;
		border-top: 0px;

	}
	#divCode {
		font-family : 'Consolas','Courier New','Courier','monospace';
		font-size: 9pt;
		border: 1px solid Black;
		border-bottom: 0px;
		background-color: #ddd;
	}
	
	#changelog {
		font-family : 'Helvetica', 'Arial','Tahoma','sans-serif';
		font-size: 8pt;
		  height: 50px;
		  overflow:Auto;
	}
	#changelog p {
	  margin-top: 0em;
	  margin-bottom: 0em;
	}
	#help {
		font-family : 'Helvetica', 'Arial','Tahoma','sans-serif';
		font-size: 8pt;
	}
	
	
	h2 {
	  font-size : 1.5em;
	  margin-top: 0em;
	  margin-bottom: 0em;
	}
	sup {
		font-size: 0.75em;
	}

	div.statusBar {
		border 			: 1px solid #CCC;
	}

	img.battery {
	    position: relative;
	    top: 50%; 
	    transform: translateY(-50%);
	    -webkit-transform: translateY(-50%);
	}

	</style>
	<script language="javascript">
	var tints = [];
	tints['White'] = {name:'White',backgroundColor:'#FFF',tint:'0,0,0'};
	tints['Black'] = {name:'Black',backgroundColor:'#000',tint:'255,255,255'};
	tints['Facebook'] = {name:'Facebook',backgroundColor:'#3b5998',tint:'255,255,255'};
	tints['Twitter'] = {name:'Twitter',backgroundColor:'#00aced',tint:'255,255,255'};
	tints['Evernote'] = {name:'Evernote',backgroundColor:'#6FB536',tint:'0,0,0'};
	tints['Instagram'] = {name:'Instagram',backgroundColor:'#517fa4',tint:'255,255,255'};
	tints['LinkedIn'] = {name:'LinkedIn',backgroundColor:'#007bb6',tint:'255,255,255'};
	tints['Viber'] = {name:'Viber',backgroundColor:'#783cbd',tint:'255,255,255'};

	function settingsChange() {
		var code=document.getElementById('code').value;
		var renderBattery = new Function('height', 'percentage', 'charging', 'low', 'color', code);
		
		var statusBackground = document.getElementById('cboBackground').options[document.getElementById('cboBackground').selectedIndex].value;
		var statusBackgroundColor = tints[statusBackground].backgroundColor;
		
		var isCustomTint = document.getElementById('isCustomTint').checked;
		
		if (!isCustomTint) {
			document.getElementById('txtColor').value = tints[statusBackground].tint;
		}
		
		var colors = document.getElementById('txtColor').value;
		var colors = colors.split(',');

		var height = document.getElementById('cboHeight').options[document.getElementById('cboHeight').selectedIndex].value;
		var isCharging = document.getElementById('isCharging').checked;
		var isLow = document.getElementById('isLow').checked;
		
		var percs=[10,20,50,75,100];
		
		var samples = document.getElementById('samples');
		
		for(var i=0;i<percs.length;i++) {
			var div = document.getElementById('div'+percs[i]);
			var img = document.getElementById('img'+percs[i]);

			if (!div) {

				div = document.createElement("div");
				div.setAttribute('id','div'+percs[i]);
				div.setAttribute('class','statusBar');

				if (i>0) {
					samples.appendChild(document.createElement('br'));
				}
	
				samples.appendChild(div);

			}
			div.style.height = height;
			div.style.backgroundColor = statusBackgroundColor;
			
			if (!img) {
				img=document.createElement("img");
				img.setAttribute('id','img'+percs[i]);
				img.setAttribute('align','right');
				img.setAttribute('class','battery');
				div.appendChild(img);
				div.appendChild(document.createTextNode(' '));
				
			}
			img.setAttribute('src', renderBattery(height, percs[i], isCharging, isLow, colors) );
		}
	}
			
	function init() {
		var cbo = document.getElementById('cboBackground');
		for (itint in tints) {
			var newOpt = document.createElement('option');
			newOpt.text = tints[itint].name;
			newOpt.value = tints[itint].name;
			cbo.add(newOpt);
		}
	}
	</script>
</head>
<body>
<h2>Lithium Theme Editor</h2>
<table width="100%" border="0">
	<tr>
		<td valign="top">
			Code:
			<hr>
			<div id="divCode">function renderBattery</div>
			<textarea id="code" rows="50" cols="100" width="30%" onkeyup="settingsChange()">
(height, percentage, charging, low, color)
{
    /* just keep these */
    var canvas  = document.createElement("canvas"),
        context = canvas.getContext("2d"),
      	tintOpaque = "rgba(" + color.join() + ",1)",
      	tintTransparent = "rgba(" + color.join() + ",0)";

    /* prepare the dimensions */
    var barHeight = Math.round(height * 3/4); 
    var barWidth = barHeight*3;

    /* how thick is the border */
    var borderWidth = 2;

    /* inner dimensions */
    var innerHeight = barHeight-borderWidth*2;
    var innerWidth  = barWidth-borderWidth*2;

    /* set the dimensions */
    canvas.width = barWidth;
    canvas.height = barHeight;

    /* draw the borders */
    context.lineWidth = borderWidth;
    context.strokeStyle = tintOpaque;
    context.strokeRect(0, 0, barWidth, barHeight);

    /* draw the charge */
    context.fillStyle = tintOpaque;
    if (charging) {context.fillStyle = '#0F0';}

    /* if not charging and low or not charging and level is 20% and below */
    if (!charging && low || !charging && percentage <= 20) {
        context.fillStyle = "#F00"; 
    }
    context.fillRect(
		borderWidth, borderWidth, 
		Math.round(innerWidth*(percentage/100)), 
		innerHeight);

    /* text */
    context.globalCompositeOperation = "xor";
    context.fillStyle = tintOpaque ;
    context.font = (innerHeight*0.80) + "px Courier";
    context.textAlign = "center";
    context.textBaseline = "middle";
    context.fillText(
		percentage, 
		Math.round(borderWidth+innerWidth/2), 
		Math.round(borderWidth*2+innerHeight/2));
    context.globalCompositeOperation = "source-over";

    /* send the image */
    return canvas.toDataURL("image/png");
}</textarea>
		</td>
		<td valign="top" align="left" width="50%">
			Preview:
			<hr>		
			<table border="0">
				<tr>
					<td valign="middle">Status Background</td>
					<td>
						<select id="cboBackground" onchange="settingsChange();" />
					</td>
				</tr>
				<tr>
					<td valign="middle">Status Height</td>
					<td><select id="cboHeight" onchange="settingsChange()">
						<option value="20">20
						<option value="40" selected>40
						<option value="48">48
						<option value="60">60
						<option value="72">72
					</select>
					<br>
					<sup>This is the height of the status bar</sup>
					</td>
				</tr>
				<tr>
					<td>Battery Charging</td>
					<td>
						<input id="isCharging" type="checkBox" onclick="settingsChange()">
						<br>
						<sup>Tick this to see how it looks like when charging</sup>
					</td>					
				</tr>
				<tr>
					<td>Battery Low</td>
					<td>
						<input id="isLow" type="checkBox" onclick="settingsChange()">
						
						<br>
						<sup>Tick this to see how it looks like when battery is low</sup>
					<td>						
				</tr>
				<tr>
					<td>System Tint</td>
					<td><input id="txtColor" type="text" value="0,0,0" onchange="settingsChange()">
					<input id="isCustomTint" type="checkBox" onclick="settingsChange()">Use Custom
					<br>
					<sup>Separate the values comma. This is the system tint. Some tweaks like Eclipse can change this.</sup>
				</tr>
				<tr>
					<td valign="top" colspan="2">Samples</td>
				</tr>
				<tr>
					<td id="samples" colspan="2"></td>
				</tr>
			</table>
			<hr>
			by <a href="https://twitter.com/supermamon/">@supermamon</a>
			<br>
			<div id="help">
				<p><b>Need help?</b>
				<ul>
					<li><a href="http://aarzee.me/lithium/tutorial.html">Lithium Tutorial</a></li>
					<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial">Canvas Tutorial by MDN</a></li>
					<li><a href="http://diveintohtml5.info/canvas.html">Canvas - Dive Into HML5</a></li>
					<li><a href="http://www.html5canvastutorials.com/tutorials/html5-canvas-element/">HTML Canvas Tutorials</a></li>
					<li><a href="http://www.w3schools.com/canvas/default.asp">HTML Canvas by W3Schools</a></li>
				</ul>
				</p>
			</div>
			<br>
			<div id="changelog">
				<p><b>Changelog</b></p>
				<p>v0.32 : Bugfix: Custom tint can now be used by ticking Use Custom.</p>
				<p>v0.31 : Modifed sample script. Added Viber background.</p>
				<p>v0.30 : Added status bar background+dynamic tint</p>
				<p>v0.21 : Add sample code for putting text</p>
				<p>v0.20 : Simpler sample with comments</p>
				<p>v0.10 : First Release</p>
			</div>
		</td>
	</tr>
</table>
<!-- Start of SimpleHitCounter Code -->
<div align="center">
<a href="http://www.simplehitcounter.com" target="_blank"><!--img src="http://simplehitcounter.com/hit.php?uid=1874119&f=0&b=16777215" border="0" height="18" width="83" alt="web counter"--></a>
<!--br><a href="http://www.simplehitcounter.com" target="_blank" style="text-decoration:none;">web counter</a-->
</div>
<!-- End of SimpleHitCounter Code -->

<script language="javascript">
	init();
	settingsChange();
</script>
</body>


</html>