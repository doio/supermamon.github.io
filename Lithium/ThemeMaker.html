<html>
<head>
	<title>Lithium Theme Editor by @supermamon</title>
	<style type="text/css">
	* {
		font-family : 'Helvetica';
	}
	.hidden {
		display:none;
	}
	h2 {
		display: inline;
	  font-size : 1.5em;
	  margin-top: 0em;
	  margin-bottom: 0em;
	}
	
	td {
		font-size : 0.8em;
	}

	#code {
		/*text area*/
		font-family : 'Consolas','Courier New','Courier','monospace';
		font-size: 9pt;
		border: 1px solid Black;
		border-top: 0px;
		width = '100%';

	}
	#divCode {
		/*function header*/
		font-family : 'Consolas','Courier New','Courier','monospace';
		font-size: 9pt;
		border: 1px solid Black;
		border-bottom: 0px;
		background-color: #ddd;
	}

	sup {
		font-size: 0.75em;
	}

	div.statusBar {
		border		: 1px solid #CCC;
		width		: 500px;
		min-width	: 250px;
	}

	img.battery {
	    position: relative;
	    top: 50%; 
	    transform: translateY(-50%);
	    -webkit-transform: translateY(-50%);
	}
	
	
	#help {
		font-family : 'Helvetica', 'Arial','Tahoma','sans-serif';
		font-size: 8pt;
	}
	
	#changelog {
		padding-top: 8pt;
		font-family : 'Helvetica', 'Arial','Tahoma','sans-serif';
		font-size: 8pt;
		height: 80px;
		overflow:Auto;
	}
	#changelog p {
	  margin-top: 0em;
	  margin-bottom: 0em;
	}
	</style>
	<script language="javascript">
	var tints = [];
	tints['White']		= {name:'White',backgroundColor:'#FFF',tint:'0,0,0'};
	tints['Black']		= {name:'Black',backgroundColor:'#000',tint:'255,255,255'};
	tints['Facebook']	= {name:'Facebook',backgroundColor:'#3b5998',tint:'255,255,255'};
	tints['Twitter']	= {name:'Twitter',backgroundColor:'#00aced',tint:'255,255,255'};
	tints['Evernote']	= {name:'Evernote',backgroundColor:'#6FB536',tint:'0,0,0'};
	tints['Instagram']	= {name:'Instagram',backgroundColor:'#517fa4',tint:'255,255,255'};
	tints['LinkedIn']	= {name:'LinkedIn',backgroundColor:'#007bb6',tint:'255,255,255'};
	tints['Viber']		= {name:'Viber',backgroundColor:'#783cbd',tint:'255,255,255'};

	var themeSamples = [];
	themeSamples[themeSamples.length] = 'SimpleBar';
	themeSamples[themeSamples.length] = 'Droid';
	themeSamples[themeSamples.length] = 'LBI';
	themeSamples[themeSamples.length] = 'Habesha';
	themeSamples[themeSamples.length] = 'Hearts';
	themeSamples[themeSamples.length] = 'Dots';
	
	function settingsChange() {
		var code=document.getElementById('code').value;
		var renderBattery = new Function('height', 'percentage', 'charging', 'low', 'color', code);
		
		var statusBackground = document.getElementById('cboBackground').options[document.getElementById('cboBackground').selectedIndex].value;
		var statusBackgroundColor = tints[statusBackground].backgroundColor;
		
		var isCustomTint = document.getElementById('isCustomTint').checked;
		
		if (!isCustomTint) {
			document.getElementById('txtColor').value = tints[statusBackground].tint;
		}
		
		var colors = document.getElementById('txtColor').value;
		var colors = colors.split(',');

		var height = document.getElementById('cboHeight').options[document.getElementById('cboHeight').selectedIndex].value;
		var isCharging = document.getElementById('isCharging').checked;
		var isLow = document.getElementById('isLow').checked;
		
		var percs=[5,10,20,50,75,100];
		
		var samples = document.getElementById('samples');
		
		for(var i=0;i<percs.length;i++) {
			var div = document.getElementById('div'+percs[i]);
			var img = document.getElementById('img'+percs[i]);

			if (!div) {

				div = document.createElement("div");
				div.setAttribute('id','div'+percs[i]);
				div.setAttribute('class','statusBar');

				if (i>0) {
					samples.appendChild(document.createElement('br'));
				}
	
				samples.appendChild(div);

			}
			div.style.height = height+'px';
			div.style.backgroundColor = statusBackgroundColor;
			
			if (!img) {
				img=document.createElement("img");
				img.setAttribute('id','img'+percs[i]);
				img.setAttribute('align','right');
				img.setAttribute('class','battery');
				div.appendChild(img);
				div.appendChild(document.createTextNode(' '));
				
			}
			img.setAttribute('src', renderBattery(height, percs[i], isCharging, isLow, colors) );
		}
	}
			
	function init() {
	
		var cbo = document.getElementById('sampleChooser');
		
		for (var i=0;i<themeSamples.length;i++) {
		
			var newOpt = document.createElement('option');
			newOpt.text = themeSamples[i];
			newOpt.value = themeSamples[i];
			cbo.add(newOpt);
			
		}
	
		cbo = document.getElementById('cboBackground');
		for (itint in tints) {
			var newOpt = document.createElement('option');
			newOpt.text = tints[itint].name;
			newOpt.value = tints[itint].name;
			cbo.add(newOpt);
		}

		loadCode();

	}
	
	function loadCode() {
		var selectedCode = document.getElementById('sampleChooser').options[document.getElementById('sampleChooser').selectedIndex].value;
	
		var code = document.getElementById('sample'+selectedCode);
		
		if (code.value) {
			document.getElementById('code').value = code.value;
		} else {
			document.getElementById('code').value = unescape(code.textContent);
		}
	
		settingsChange();
	}
	</script>
</head>
<body>
<h2>Lithium Theme Editor</h2> by <a href="https://twitter.com/supermamon/">@supermamon</a>
<br>
<table width="100%" border="0">
	<tr>
		<td>
			<b>Sample Code:</b> <select id="sampleChooser" onchange="loadCode()"></select>
		</td>
		<td>
			<b>Preview:</b>
		</td>
	</tr>
	<tr>
		<td><hr></td>
		<td><hr></td>
	</tr>
	<tr>
		<td valign="top" width="30%">
			<div id="divCode">function renderBattery</div>
			<textarea id="code" rows="40" cols="100" onkeyup="settingsChange()"></textarea>
		</td>
		<td valign="top" align="left" width="50%">
			<table border="0" align="center">
				<tr>
					<td valign="middle">Status Background</td>
					<td>
						<select id="cboBackground" onchange="settingsChange();" />
					</td>
				</tr>
				<tr>
					<td valign="middle">Status Height</td>
					<td><select id="cboHeight" onchange="settingsChange()">
						<option value="20">20
						<option value="40" selected>40
						<option value="48">48
						<option value="60">60
						<option value="72">72
					</select>
					<br>
					<sup>This is the height of the status bar</sup>
					</td>
				</tr>
				<tr>
					<td>Battery Charging</td>
					<td>
						<input id="isCharging" type="checkBox" onclick="settingsChange()">
						<br>
						<sup>Tick this to see how it looks like when charging</sup>
					</td>					
				</tr>
				<tr>
					<td>Battery Low</td>
					<td>
						<input id="isLow" type="checkBox" onclick="settingsChange()">
						
						<br>
						<sup>Tick this to see how it looks like when battery is low</sup>
					<td>						
				</tr>
				<tr>
					<td>System Tint</td>
					<td><input id="txtColor" type="text" value="0,0,0" onchange="settingsChange()">
					<input id="isCustomTint" type="checkBox" onclick="settingsChange()">Use Custom
					<br>
					<sup>Separate the values comma. This is the system tint. Some tweaks like Eclipse can change this.</sup>
				</tr>
				<tr>
					<td valign="top" colspan="2">How it looks like?</td>
				</tr>
				<tr>
					<td id="samples" colspan="2"></td>
				</tr>
			</table>
			<hr>
			<table border="0" width="90%" align="center">
			<tr>
				<td valign="top">
					<p><b>Need help?</b>
					<div id="help">
						<ul>
							<li><a href="http://aarzee.me/lithium/tutorial.html">Lithium Tutorial</a></li>
							<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial">Canvas Tutorial by MDN</a></li>
							<li><a href="http://diveintohtml5.info/canvas.html">Canvas - Dive Into HML5</a></li>
							<li><a href="http://www.html5canvastutorials.com/tutorials/html5-canvas-element/">HTML Canvas Tutorials</a></li>
							<li><a href="http://www.w3schools.com/canvas/default.asp">HTML Canvas by W3Schools</a></li>
						</ul>
						</p>
					</div>
				</td>
				<td valign="top">
					<b>Changelog</b>
					<div id="changelog">
						<p>v0.4.0 : Added Sample Code picker.</p>
						<p>v0.3.2 : Bugfix: Custom tint can now be used by ticking Use Custom.</p>
						<p>v0.3.1 : Modifed sample script. Added Viber background.</p>
						<p>v0.3.0 : Added status bar background+dynamic tint</p>
						<p>v0.2.1 : Add sample code for putting text</p>
						<p>v0.2.0 : Simpler sample with comments</p>
						<p>v0.1.0 : First Release</p>
					</div>
				</td>
			</tr>
			</table>
		</td>
	</tr>
</table>
<!-- Start of SimpleHitCounter Code -->
<div align="center">
<a href="http://www.simplehitcounter.com" target="_blank"><img src="http://simplehitcounter.com/hit.php?uid=1874119&f=0&b=16777215" border="0" height="18" width="83" alt="web counter"></a>
<!--br><a href="http://www.simplehitcounter.com" target="_blank" style="text-decoration:none;">web counter</a-->
</div>
<!-- End of SimpleHitCounter Code -->

<textarea id="sampleSimpleBar" class="hidden">(height, percentage, charging, low, color)
{
/* just keep these */
var canvas  = document.createElement("canvas"),
	context = canvas.getContext("2d"),
	tintOpaque = "rgba(" + color.join() + ",1)",
	tintTransparent = "rgba(" + color.join() + ",0)";

/* prepare the dimensions */
var barHeight = Math.round(height * 3/4); 
var barWidth = barHeight*3;

/* how thick is the border */
var borderWidth = 2;

/* inner dimensions */
var innerHeight = barHeight-borderWidth*2;
var innerWidth  = barWidth-borderWidth*2;

/* set the dimensions */
canvas.width = barWidth;
canvas.height = barHeight;

/* draw the borders */
context.lineWidth = borderWidth;
context.strokeStyle = tintOpaque;
context.strokeRect(0, 0, barWidth, barHeight);

/* draw the charge */
context.fillStyle = tintOpaque;
if (charging) {context.fillStyle = '#0F0';}

/* if not charging and low or not charging and level is 20% and below */
if (!charging && low || !charging && percentage <= 20) {
	context.fillStyle = "#F00"; 
}
context.fillRect(
	borderWidth, borderWidth, 
	Math.round(innerWidth*(percentage/100)), 
	innerHeight);

/* text */
context.globalCompositeOperation = "xor";
context.fillStyle = tintOpaque ;
context.font = (innerHeight*0.80) + "px Courier";
context.textAlign = "center";
context.textBaseline = "middle";
context.fillText(
	percentage, 
	Math.round(borderWidth+innerWidth/2), 
	Math.round(borderWidth*2+innerHeight/2));
context.globalCompositeOperation = "source-over";

/* send the image */
return canvas.toDataURL("image/png");
}</textarea>
<textarea id="sampleDots" class="hidden">(height, percentage, charging, low, color) 
{
/* prepare */
var canvas  = document.createElement("canvas"),
	context = canvas.getContext("2d"),
	tint = "rgba(" + color.join() + ",1)";

/* prepare the dimensions */
var barHeight = Math.round(height * 1/4);

var 
	blockCount = 5,
	percentPerBlock = 100/blockCount,
	blockWidth = barHeight,
	spacing = 4;

var barWidth = (blockWidth + spacing)*blockCount;

/* how thick is the border */
var borderWidth = 1;

/* set the dimensions */
canvas.width = barWidth;
canvas.height = barHeight;

/* drawing settings  */
context.lineWidth = borderWidth;
context.strokeStyle = tint;
context.fillStyle = tint;
//  context.strokeRect(0, 0, barWidth, barHeight);

var topLeft, cx,cy;
for (var i=1;i<=blockCount;i++) {

	topLeft = (i-1)*spacing+(i-1) * blockWidth;
	cx = topLeft + blockWidth/2;
	cy = barHeight/2;
	radius = blockWidth/2-1;
	//    context.strokeRect( (i-1)*spacing+(i-1)*blockWidth, 0, blockWidth, barHeight);

	context.beginPath();
	context.arc(cx,cy,radius,0,2*Math.PI);

	if (percentage<=20) { 
		context.fillStyle = '#F00';
		context.strokeStyle = '#F00';
	}
	if (charging) { 
		context.fillStyle = '#0F0';
		context.strokeStyle = '#0F0';
	}

	if (percentage > ((i-1)*percentPerBlock)) {
		context.fill();
	}
	context.stroke();

}

/* send the image back */
return canvas.toDataURL("image/png");

//end
}</textarea>
<textarea id="sampleDroid" class="hidden">(height, percentage, charging, low, color)
{
    var barHeightMinusTwo = 2 * Math.round(height * 2 / 5),
        barHeight = barHeightMinusTwo + 2,
        widthMinusTwo = 2 * Math.round(barHeightMinusTwo * 5 / 16),
        width = widthMinusTwo + 2,
        cutWidth = Math.floor(1 + width * 3 / 14),
        cutHeight = Math.floor(1 + barHeight / 11),
        canvas = document.createElement("canvas"),
        context = canvas.getContext("2d"),
        imageData;
    canvas.width = width;
    canvas.height = barHeight;
    context.fillStyle = "rgba(0,0,0,0.3)";
    context.fillRect(1, 1, widthMinusTwo, barHeightMinusTwo);
    context.fillStyle = "#000";
    context.fillRect(1, barHeightMinusTwo * ((100 - percentage) / 100), widthMinusTwo, barHeightMinusTwo);
    context.clearRect(0, 0, cutWidth, cutHeight);
    context.clearRect(width - cutWidth, 0, cutWidth, cutHeight);
    imageData = context.getImageData(0, 0, width, barHeight);
    for(var i = 0; i < imageData.data.length; i += 4) {
        imageData.data[i + 3] = 255 - imageData.data[i + 3];
    }
    context.putImageData(imageData, 0, 0);
    context.font = barHeightMinusTwo * ((percentage < 6) ? 0.625 : 0.375) + "pt HelveticaNeue-CondensedBold";
    context.textAlign = "center";
    context.textBaseline = "middle";
    context.fillText(charging ? '\u26a1' : (percentage < 6) ? '!' : percentage, width / 2, barHeight / 2, widthMinusTwo * 0.9);
    imageData = context.getImageData(0, 0, width, barHeight);
    for(var i = 0; i < imageData.data.length; i += 4) {
        imageData.data[i + 3] = 255 - imageData.data[i + 3];
        var currentTrans = imageData.data[i + 3] / 255;
        imageData.data[i] = color[0] * currentTrans;
        imageData.data[i + 1] = color[1] * currentTrans;
        imageData.data[i + 2] = color[2] * currentTrans;
    }
    context.putImageData(imageData, 0, 0);
    return canvas.toDataURL("image/png");
}</textarea>
<textarea id="sampleLBI" class="hidden">(height, percentage, charging, low, color)
{
    var radius = Math.round(height * 4 / 5) / 2,
        lineWidth = Math.floor(height / 20),
        size = radius * 2 + lineWidth,
        canvas = document.createElement("canvas"),
        context = canvas.getContext("2d"),
        colorString = color.join(),
        halfSize = size/2,
        fontHeight = radius,
        pi = Math.PI;
    if(percentage == 100) fontHeight = Math.round(height * 3 / 5) / 2;
    canvas.width = size;
    canvas.height = size;
    context.lineWidth = lineWidth;
    context.strokeStyle = "rgba(" + colorString + ",0.3)";
    if(low) context.strokeStyle = "rgba(255,59,48,0.3)";
    if(charging) context.strokeStyle = "rgba(76,217,100,0.3)";
    context.arc(halfSize, halfSize, radius, 0, pi * 2);
    context.stroke();
    context.strokeStyle = "rgb(" + colorString + ")";
    if(low) context.strokeStyle = "#FF3B30";
    if(charging) context.strokeStyle = "#4CD964";
    context.fillStyle = context.strokeStyle;
    context.beginPath();
    context.arc(halfSize, halfSize, radius, pi * (((100 - percentage) / 50) - 0.5), pi * 1.5);
    context.stroke();
    context.font = fontHeight + "pt Helvetica Neue";
    context.textAlign = "center";
    context.textBaseline = "middle";
    context.fillText(percentage, halfSize, halfSize);
    return canvas.toDataURL("image/png");
}</textarea>
<textarea id="sampleHabesha" class="hidden">(height, percentage, charging, low, color)
{
    var emptyBarCanvas = document.createElement("canvas"),
        emptyBarContext = emptyBarCanvas.getContext("2d"),
        emptyBarData,
        fullBarCanvas = document.createElement("canvas"),
        fullBarContext = fullBarCanvas.getContext("2d"),
        fullBarData,
        finalCanvas = document.createElement("canvas"),
        finalContext = finalCanvas.getContext("2d"),
        barWidth = 2 + height / 4,
        barHeight = 2 + height / 2,
        radius = height / 8,
        horizontalPadding = Math.ceil(height / 16),
        totalWidth = barWidth * 5 + horizontalPadding * 4,
        colorString = "rgb(" + color.join() + ")",
        barData;
    finalCanvas.width = totalWidth;
    finalCanvas.height = barHeight;
    emptyBarCanvas.width = barWidth;
    emptyBarCanvas.height = barHeight;
    fullBarCanvas.width = barWidth;
    fullBarCanvas.height = barHeight;
    function drawPath(ctx) {
        ctx.beginPath();
        ctx.arc(barWidth / 2, barHeight - radius - 1, radius, 0, Math.PI);
        ctx.lineTo(1, radius + 1);
        ctx.arc(barWidth / 2, radius + 1, radius, Math.PI, 0);
        ctx.lineTo(barWidth - 1, barHeight - radius - 1);
        ctx.clip();
        ctx.lineWidth = Math.floor(height / 20);
        ctx.strokeStyle = colorString;
    }
    drawPath(emptyBarContext);
    emptyBarContext.stroke();
    emptyBarData = emptyBarContext.getImageData(0, 0, barWidth, barHeight);
    fullBarContext.fillStyle = colorString;
    if(low) fullBarContext.fillStyle = "#FF3B30";
    if(charging) fullBarContext.fillStyle = "#4CD964";
    drawPath(fullBarContext);
    fullBarContext.fill();
    fullBarContext.stroke();
    fullBarData = fullBarContext.getImageData(0, 0, barWidth, barHeight);
    for(var i = 0; i < 5; i++) {
        if(percentage <= 20 * i)
            barData = emptyBarData;
        else if(percentage >= 20 * (i+1) )
            barData = fullBarData;
        else {
            finalContext.putImageData(fullBarData, i * (barWidth + horizontalPadding), 0);
            barData = emptyBarContext.getImageData(0, 0, barWidth, (barHeight - 6) * (1 - (percentage - (20 * i)) / 20) + 3);
        }
        finalContext.putImageData(barData, i * (barWidth + horizontalPadding), 0);
    }
    return finalCanvas.toDataURL("image/png");
}</textarea>
<textarea id="sampleHearts" class="hidden">(height, percentage, charging, low, color)
{
    var colorString = "rgb(" + color.join() + ")",
        scale = Math.floor(height / 20),
        halfHearts = Math.ceil(percentage / 5),
        fullHeartData,
        halfHeartData,
        emptyHeartData,
        finalCanvas = document.createElement("canvas"),
        finalContext = finalCanvas.getContext("2d");
    function initHeart(canvas, context) {
        canvas.width = scale * 8;
        canvas.height = scale * 7;
        context.fillStyle = colorString;
        context.fillRect(0, 0, scale * 8, scale * 7);
        context.clearRect(0, 0, scale, scale);
        context.clearRect(scale * 3, 0, scale, scale);
        context.clearRect(scale * 7, 0, scale, scale);
        context.clearRect(0, scale * 4, scale, scale);
        context.clearRect(scale * 7, scale * 4, scale, scale);
        context.clearRect(0, scale * 5, scale * 2, scale * 2);
        context.clearRect(scale * 6, scale * 5, scale * 2, scale * 2);
        context.clearRect(scale * 2, scale * 6, scale, scale);
        context.clearRect(scale * 5, scale * 6, scale, scale);
    }
    if(halfHearts > 1) {
        var fullHeartCanvas = document.createElement("canvas"),
            fullHeartContext = fullHeartCanvas.getContext("2d");
        initHeart(fullHeartCanvas, fullHeartContext);
        fullHeartData = fullHeartContext.getImageData(0, 0, scale * 8, scale * 7);
    }
    if(halfHearts % 2 == 1) {
        var halfHeartCanvas = document.createElement("canvas"),
            halfHeartContext = halfHeartCanvas.getContext("2d")
        initHeart(halfHeartCanvas, halfHeartContext);
        halfHeartContext.clearRect(scale * 4, scale, scale * 3, scale * 3);
        halfHeartContext.clearRect(scale * 4, scale * 4, scale * 2, scale);
        halfHeartContext.clearRect(scale * 4, scale * 5, scale, scale);
        halfHeartData = halfHeartContext.getImageData(0, 0, scale * 8, scale * 7);
    }
    if(halfHearts < 19) {
        var emptyHeartCanvas = document.createElement("canvas"),
            emptyHeartContext = emptyHeartCanvas.getContext("2d");
        initHeart(emptyHeartCanvas, emptyHeartContext);
        emptyHeartContext.clearRect(scale, scale, scale * 2, scale);
        emptyHeartContext.clearRect(scale * 4, scale, scale * 3, scale);
        emptyHeartContext.clearRect(scale, scale * 2, scale * 6, scale * 2);
        emptyHeartContext.clearRect(scale * 2, scale * 4, scale * 4, scale);
        emptyHeartContext.clearRect(scale * 3, scale * 5, scale * 2, scale);
        emptyHeartData = emptyHeartContext.getImageData(0, 0, scale * 8, scale * 7);
    }
    finalCanvas.width = scale * 44;
    finalCanvas.height = scale * 16;
    for(var i = 0; i < 10; i++) {
        finalContext.putImageData((halfHearts >= (i + 1) * 2) ? fullHeartData : (halfHearts - (i * 2) == 1) ? halfHeartData : emptyHeartData, (i % 5) * scale * 9, i < 5 ? scale * 9 : 0);
    }
    return finalCanvas.toDataURL("image/png");
}</textarea>
<script language="javascript">
	init();
	settingsChange();
</script>

</body>

</html>